# ライツアウトゲーム要件定義

## 1. ゲーム概要
ライツアウトは、グリッド上で透過画像のボカシを消去するパズルゲームです。各マスをクリックすると、そのマスと隣接するマスの透過画像のボカシ状態が反転します。すべてのボカシを消去することが目的です。

## 2. 機能要件

### 2.1 ゲームボード
- 背景画像と透過画像があり透過画像は前面に配置される
- 透過画像は背景画像と同じサイズにスケールされる
- 透過画像は難易度別のグリッドサイズ持つ
  - 初級：3x3マス - 初級レベル（3x3）
  - 中級：4x4マス - 中級レベル（4x4）
  - 上級：5x5マス - 上級レベル（5x5）
- 各マスは透過画像のボカシ状態を持つ
- グリッドのサイズは画面サイズに応じて適切にスケーリング
- 透過画像はモーダル内に配置され適切にスケーリング

- 背景画像の設定
  - 画像ベースの初期状態
    - `lightsOut_easy_01.png` - 初級レベル用背景画像
    - `lightsOut_normal_01.png` - 中級レベル用背景画像
    - `lightsOut_hard_01.png` - 上級レベル用背景画像
  - 画像は `assets/games/lights-out/` ディレクトリに配置

### 2.2 ゲームロジック
- マスクリック時の動作
  - クリックしたマスの透過画像をボカシ状態を反転
  - 上下左右の隣接マスの透過画像をボカシ状態を反転
  - 対角線上のマスは反転しない
- 勝利条件：透過画像のすべてのマスのボカシを消去
- 初期状態の読み込み
  - 画像ファイルの存在確認
  - 画像から初期状態を解析
  - 画像のボカシ状態の管理

### 2.3 ゲーム制御
- リセットボタン：ゲームを初期状態に戻す
- タイマー表示：経過時間の表示
- クリック回数のカウント
- 難易度選択機能
  - 初級/中級/上級の切り替え
  - 難易度に応じたグリッドサイズの変更
  - 難易度に応じた画像の切り替え

### 2.4 スコア管理
- 難易度別のハイスコア記録
  - 最短手数でのクリア
  - クリア時間
  - 日時
  - クリア回数
- スコアの表示
  - 現在の手数
  - ベストスコア
  - 平均クリア時間
  - クリア回数

### 2.5 UI/UX
- 透過画像のボカシ状態を視覚的に明確に表示
- クリック時のアニメーション効果
- クリア時の祝福演出
- 操作説明の表示
- 難易度選択UI
- スコア表示UI
- 画像の表示
  - 難易度に応じた画像の表示
  - ボカシ効果の視覚的表現

## 3. 技術要件

### 3.1 パフォーマンス
- マスクリック時の応答時間：0.1秒以内
- アニメーションの滑らかな表示
- 画像の事前読み込み
- ボカシ効果の高速な適用

### 3.2 アクセシビリティ
- キーボード操作のサポート
- スクリーンリーダー対応
- 十分なコントラスト比の確保
- 難易度選択のキーボード操作
- 画像の代替テキスト提供

### 3.3 レスポンシブ対応
- モバイル端末での適切な表示
- タッチ操作の最適化
- 画面サイズに応じたグリッドのスケーリング
- 難易度選択UIのレスポンシブ対応
- 画像の適切なスケーリング