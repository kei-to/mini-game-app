# 機能要件定義書

## 1. システム概要
本システムは、複数のミニゲームを提供するWebアプリケーションです。ユーザーは様々なゲームを楽しみ、スコアを記録し、進捗を管理することができます。

## 2. 主要機能

### 2.1 ホーム画面機能
- 情報メニューの表示と操作
- キャラクター表示と切り替え
- ゲーム選択ボタン（5つのゲーム）
- ギャラリー/コンフィグ画面への遷移
- ミュートボタンによる音声制御

### 2.2 ゲーム選択機能
- 利用可能なゲームの一覧表示
- ゲームのサムネイル表示
- ゲーム詳細への遷移
- ホーム画面への戻る機能

### 2.3 設定機能
- 音声設定
  - BGM音量調整（0-100%）
  - 効果音量調整（0-100%）
- ゲーム設定
  - 難易度設定（easy/normal/hard）
  - 言語設定（日本語/英語）
  - チュートリアル表示設定
- 表示設定
  - 背景表示の有無
  - アニメーションの有効/無効
  - UIスケール調整

### 2.4 進捗管理機能
- クリアしたゲームの記録
- ハイスコアの保存
- アンロックコンテンツの管理

### 2.5 音声機能
- BGM再生
- 効果音再生
- ミュート機能
- 音量調整機能

## 3. 画面遷移
1. ホーム画面（初期画面）
2. ゲーム選択画面
3. ギャラリー画面
4. 設定画面
5. ゲーム画面

## 4. データ管理
- ローカルストレージを使用した設定の永続化
- ゲーム進捗の保存
- ハイスコアの記録
- アンロックコンテンツの管理 

## 5. ゲーム画面
- ゲーム画面はモーダルにて表示
- モーダルを表示している最中はバックの画面はボカシを入れる
- ゲーム選択画面からゲーム画面を表示される
- ゲーム内容についてはモジュールを切り替える

## 6. ゲーム

### 6.1 ライツアウト
- 初期化設定
  - 表示する画像を取得する
  - 表示する画像のアスペクト比を取得
  - 現在開いている画面のサイズを取得
  - 表示する画像のアスペクト比が大きい方を基準として、現在開いている画面のサイズの80%に合わせてモーダル画面を準備

  - ゲーム画面から設定された難易度によりマス数の設定
    - easy：3×3
    - normal：4×4
    - hard：5×5

  - 表示する画像の命名規則配下の通り
    - lightsOut_easy_01
    - lightsOut_normal_01
    - lightsOut_hard_01

  - モーダル画面の画像表示
    - 難易度設定で設定されたマス目数の二次元配列を準備
    - 初期値はbool型ですべてfalse
    - モーダル画面をマス目数分の配置を行い、マス目とマス目の間に白線を表示
    - 用意した二次元配列とモーダル画面のマス目に割り当てを行う
    - 二次元配列の値がfalseの場合、対応するマス目の部分はボカシ加工を行い表示
    - 二次元配列の値がfalseの場合、対応するマス目は部分はボカシ加工を解除し表示

  - ゲームプレイ
    - クリア条件は二次元配列のboolがすべてtrue
    - 画面をタップ時、クリックされた時の挙動
      - モーダル画面内のマス目の場合、クリック、タップされた場所に対応する二次元配列をBoolをTrueへ変更
      - クリック、タップされた場所の一次元目、二次元目の-1、+1の配列もTrueへ変更
      - 二次元配列の範囲外になる部分は処理しない